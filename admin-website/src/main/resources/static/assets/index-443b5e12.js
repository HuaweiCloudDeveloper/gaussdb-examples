import{u as f,v,w as l,y as Z,A as Y,B as J,z,E as y,D as B,F as Q,d as M,a0 as U,r as I,c as j,a8 as F,l as n,H as u,W as r,a1 as W,i as E,J as $,M as D,N as G,p as K,Z as X,_ as x}from"./vue-fdfdc7c1.js";import{s as ee,x as ae,d as q,p as se,a as re,$ as oe,b as ne,c as te,u as le,I as L,C as ie,B as O,T as P,_ as S,r as de,e as ue,L as me,F as pe,f as ce}from"./index-c4332e9f.js";import{F as k,a as H}from"./index-8fd4ffea.js";import{u as R,N as ge}from"./loading-bee91100.js";import"./index-259f1314.js";import"./warning-triangle-d6fdd716.js";var fe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_e=l("path",{d:"M512 1024a512 512 0 1 1 512-512 512 512 0 0 1-512 512zm0-960a448 448 0 1 0 448 448A448 448 0 0 0 512 64z"},null,-1),ve=l("path",{d:"M512 1024c-145.28 0-256-224-256-512S366.72 0 512 0s259.2 224 259.2 512-113.92 512-259.2 512zm0-960c-94.08 0-192 181.76-192 448s97.92 448 192 448 195.2-179.2 195.2-448S606.08 64 512 64z"},null,-1),he=l("path",{d:"M512 339.84a778.88 778.88 0 0 1-390.4-90.88A32 32 0 1 1 154.24 192 723.2 723.2 0 0 0 512 275.84a733.44 733.44 0 0 0 352.64-78.08A32 32 0 1 1 896 256a794.88 794.88 0 0 1-384 83.84zM880.64 822.4a30.72 30.72 0 0 1-16.64-4.48A723.2 723.2 0 0 0 506.24 736a733.44 733.44 0 0 0-352.64 78.72 32 32 0 0 1-32-55.68 802.56 802.56 0 0 1 384-87.04A790.4 790.4 0 0 1 896 762.88a32 32 0 0 1-16.64 59.52zM989.44 544H34.56a32 32 0 1 1 0-64h954.88a32 32 0 0 1 0 64z"},null,-1),ye=l("path",{d:"M512 1024a32 32 0 0 1-32-32V34.56a32 32 0 1 1 64 0v954.88a32 32 0 0 1-32 34.56z"},null,-1),we=[_e,ve,he,ye];function be(e,a){return f(),v("svg",fe,[].concat(we))}var $e={render:be},ke=function(){return ee({name:"IconLanguage",component:$e})()};const Ce=({emit:e,props:a,state:s})=>o=>{!s.disabled&&!a.href&&e("click",o)},ze=["state","handleClick"],Ie=(e,{inject:a,reactive:s,computed:o},{emit:m,parent:p})=>{p.tinyForm=p.tinyForm||a("form",null);const _=s({formDisabled:o(()=>(p.tinyForm||{}).disabled),disabled:o(()=>e.disabled||_.formDisabled),href:o(()=>ae.filterUrl(e.href))});return{state:_,handleClick:Ce({emit:m,props:e,state:_})}};function Le(e,a){var s=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s)return(s=s.call(e)).next.bind(s);if(Array.isArray(e)||(s=Me(e))||a&&e&&typeof e.length=="number"){s&&(e=s);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Me(e,a){if(e){if(typeof e=="string")return T(e,a);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return T(e,a)}}function T(e,a){(a==null||a>e.length)&&(a=e.length);for(var s=0,o=new Array(a);s<a;s++)o[s]=e[s];return o}var Se=function(a,s){for(var o=a.__vccOpts||a,m=Le(s),p;!(p=m()).done;){var _=p.value,i=_[0],c=_[1];o[i]=c}return o},Ve=q({props:[].concat(se,["disabled","href","icon","type","underline","value","size"]),emits:["click"],setup:function(a,s){return re({props:a,context:s,renderless:Ie,api:ze})}}),Ae=["href"],Fe={key:1,class:"tiny-link__inner"},Pe={key:2,class:"tiny-link__inner"};function Ne(e,a,s,o,m,p){return f(),v("a",Q({class:["tiny-link","tiny-link--additional",e.type?"tiny-link--"+e.type:"",e.state.disabled&&"is-disabled",e.underline&&!e.state.disabled&&"is-underline",e.size==="medium"?"tiny-link--"+e.size:"tiny-link--base"],href:e.state.disabled?null:e.state.href},e.a(e.$attrs,["^on[A-Z]"]),{rel:"noopener noreferrer",onClick:a[0]||(a[0]=function(){return e.handleClick&&e.handleClick.apply(e,arguments)})}),[e.icon?(f(),Z(J(e.icon),{key:0,class:Y(["tiny-svg-size tiny-link-svg",{"tiny-link-svg-only":!(e.slots.default||e.value)}])},null,8,["class"])):z("v-if",!0),e.value?(f(),v("span",Fe,y(e.value),1)):e.slots.default?(f(),v("span",Pe,[B(e.$slots,"default")])):z("v-if",!0),e.slots.icon?B(e.$slots,"icon",{key:3}):z("v-if",!0)],16,Ae)}var Oe=Se(Ve,[["render",Ne]]);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},N.apply(this,arguments)}var Be=function(a){var s;return typeof process=="object"&&((s={})==null||s.TINY_MODE),Oe},De=N({},oe,{type:{type:String,default:"default"},value:String,underline:{type:Boolean,default:!0},href:String,icon:[Object,String],disabled:Boolean,size:String}),b=q({name:ne+"Link",props:De,setup:function(a,s){return te({props:a,context:s,template:Be})}}),Te="3.16.0";b.install=function(e){e.component(b.name,b)};b.version=Te;const Ue={class:"login-form-container"},je={class:"login-form-options"},Ee=M({__name:"login-mail",setup(e){const a=W(),{t:s}=U(),{loading:o,setLoading:m}=R(),p=le(),_=I(),i=j(()=>({mailname:[{required:!0,message:s("login.form.mailName.errMsg"),trigger:"change"}],mailpassword:[{required:!0,message:s("login.form.mailpassword.errMsg"),trigger:"change"}]})),c=F({mailname:"admin",mailpassword:"changeMyPassword",rememberPassword:!0}),C=E("handle"),V=()=>{C(!0)};function A(){var h;(h=_.value)==null||h.validate(async w=>{if(w){m(!0);try{await p.login({username:c.mailname,password:c.mailpassword,grant_type:"password"}),P.message({message:s("login.form.login.success"),status:"success"});const{redirect:t,...d}=a.currentRoute.value.query;a.push({name:t||"Home",query:{...d}})}catch{ge({type:"error",title:s("login.tip.right"),message:s("login.tip.mail"),position:"top-right",duration:2e3,customClass:"my-custom-cls"})}finally{m(!1)}}})}return(h,w)=>(f(),v("div",Ue,[n(r(H),{ref_key:"loginFormMail",ref:_,model:c,class:"login-form",rules:i.value,"validate-type":"text","label-width":"0",size:"medium"},{default:u(()=>[n(r(k),{prop:"mailname",size:"medium"},{default:u(()=>[n(r(L),{modelValue:c.mailname,"onUpdate:modelValue":w[0]||(w[0]=t=>c.mailname=t),placeholder:h.$t("login.form.mailName.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),n(r(k),{prop:"mailpassword",size:"medium"},{default:u(()=>[n(r(L),{modelValue:c.mailpassword,"onUpdate:modelValue":w[1]||(w[1]=t=>c.mailpassword=t),type:"password","show-password":"",placeholder:h.$t("login.form.mailpassword.placeholder")},null,8,["modelValue","placeholder"])]),_:1}),l("div",je,[n(r(ie),null,{default:u(()=>[$(y(h.$t("login.form.rememberPassword")),1)]),_:1}),l("div",null,[n(r(b),{type:"primary"},{default:u(()=>[$(y(h.$t("login.form.forgetPassword")),1)]),_:1}),n(r(b),{type:"primary",class:"divide-line"},{default:u(()=>[$("|")]),_:1}),n(r(b),{type:"primary",onClick:V},{default:u(()=>[$(y(h.$t("login.form.registration")),1)]),_:1})])]),n(r(k),{size:"medium"},{default:u(()=>[n(r(O),{type:"primary",class:"login-form-btn",loading:r(o),onClick:A},{default:u(()=>[$(y(h.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])]))}});const qe=S(Ee,[["__scopeId","data-v-985986a4"]]),He={class:"login-register-container"},Re={class:"login-form-options"},Ze=M({__name:"login-register",setup(e){const{t:a}=U(),{loading:s,setLoading:o}=R(),m=I(),p=E("handle"),_=()=>{p(!1)};let i=F({username:"",password:"",passwordConfirm:""}),c=I(!0);const C=(t,d,g)=>{/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(d)?g():g(new Error(a("login.form.checkPassword")))},V=(t,d,g)=>{/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(d)?g():g(new Error(a("login.form.checkUsername")))},A=(t,d,g)=>{i.password&&i.password!==d?g(new Error(a("login.form.confirmPassword"))):g()},h=j(()=>({username:[{required:!0,message:a("login.form.mailName.errMsg"),trigger:"blur"},{validator:V,trigger:"blur"}],password:[{required:!0,message:a("login.form.mailpassword.errMsg"),trigger:"blur"},{validator:C,trigger:"blur"}],passwordConfirm:[{required:!0,message:a("login.form.mailpassword2.errMsg"),trigger:"blur"},{validator:A,trigger:"blur"}]}));function w(){m.value.validate(async t=>{if(t){let d=F({username:i.username,password:i.password});await de(d),P.message({message:a("login.form.registerPass"),status:"success"}),p(!1)}else P.message({message:a("login.form.registerError"),status:"warning"})})}return(t,d)=>(f(),v("div",He,[n(r(H),{ref_key:"ruleForm",ref:m,model:r(i),rules:h.value,"validate-on-rule-change":r(c),"label-align":!0,"label-position":"top","label-width":"100px"},{default:u(()=>[n(r(k),{label:t.$t("login.form.mailInput"),prop:"username",size:"medium"},{default:u(()=>[n(r(L),{modelValue:r(i).username,"onUpdate:modelValue":d[0]||(d[0]=g=>r(i).username=g),placeholder:t.$t("login.form.registerMail.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(r(k),{label:t.$t("login.form.passwordInput"),prop:"password",size:"medium"},{default:u(()=>[n(r(L),{modelValue:r(i).password,"onUpdate:modelValue":d[1]||(d[1]=g=>r(i).password=g),placeholder:t.$t("login.form.registerPassword.placeholder"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(r(k),{label:t.$t("login.form.passwordConfirm"),prop:"passwordConfirm",size:"medium"},{default:u(()=>[n(r(L),{modelValue:r(i).passwordConfirm,"onUpdate:modelValue":d[2]||(d[2]=g=>r(i).passwordConfirm=g),placeholder:t.$t("login.form.registerConfirmPassword.placeholder"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l("div",Re,[n(r(b),{type:"primary",onClick:_},{default:u(()=>[$(y(t.$t("login.form.change")),1)]),_:1})]),n(r(k),{size:"medium"},{default:u(()=>[n(r(O),{type:"primary",class:"login-form-btn",loading:r(s),onClick:w},{default:u(()=>[$(y(t.$t("login.form.register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules","validate-on-rule-change"])]))}});const Ye=S(Ze,[["__scopeId","data-v-99554533"]]),Je={key:0,class:"login-lan-drop"},Qe=["value","onClick"],We=M({__name:"login-lang",setup(e){const a=[...me],{changeLocale:s}=ue(),o=ke(),m=I(!1),p=()=>{m.value=!m.value};return(_,i)=>(f(),v(D,null,[n(r(O),{icon:r(o),circle:"",onClick:p},null,8,["icon"]),l("span",null,y(_.$t("login.icon.language")),1),m.value?(f(),v("div",Je,[(f(),v(D,null,G(a,(c,C)=>l("li",{key:C,value:c.value,onClick:V=>r(s)(a[C].value)},y(c.label),9,Qe)),64))])):z("",!0)],64))}});const Ge=S(We,[["__scopeId","data-v-ea2ebbb9"]]),Ke={class:"login-form-container"},Xe={class:"login-form-language"},xe={key:0},ea={key:1},aa=M({__name:"login-form",setup(e){I("first");let a=I(!1);return K("handle",o=>{a.value=o}),(o,m)=>(f(),v("div",Ke,[l("div",Xe,[n(Ge)]),r(a)?(f(),v("div",xe,[n(Ye)])):z("",!0),r(a)?z("",!0):(f(),v("div",ea,[n(qe)]))]))}});const sa=S(aa,[["__scopeId","data-v-19097b9e"]]),ra=e=>(X("data-v-fe79e3e5"),e=e(),x(),e),oa={class:"container-login"},na={class:"content"},ta={class:"login"},la={class:"login-header"},ia=ra(()=>l("div",{class:"login-logo"},[l("img",{class:"login-logo-img",alt:"Tiny Design",src:ce}),l("span",{class:"login-logo-text"},"TinyPro of Vue")],-1)),da={class:"login-desc"},ua={class:"footer"},ma=M({__name:"index",setup(e){return(a,s)=>(f(),v("div",oa,[l("div",na,[l("div",ta,[l("div",la,[ia,l("div",da,y(a.$t("login.main.text")),1)]),n(sa)])]),l("div",ua,[n(pe)])]))}});const ha=S(ma,[["__scopeId","data-v-fe79e3e5"]]);export{ha as default};
