import{s as X,i as tt,o as et,j as nt,k as rt,l as ot,m as it,d as at,b as st,n as ct,a as lt,q as z}from"./index-c4332e9f.js";import{u as ut,v as ft,w as U,l as C,I as ht,L as dt,r as vt}from"./vue-fdfdc7c1.js";import{i as yt}from"./warning-triangle-d6fdd716.js";var pt={class:"prompt_svg__tiny-icon-prompt",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",style:{"enable-background":"new 0 0 14 14"},"xml:space":"preserve"},mt=U("path",{d:"M7 0C3.13 0 0 3.13 0 7s3.13 7 7 7 7-3.13 7-7-3.13-7-7-7z",style:{"fill-rule":"evenodd","clip-rule":"evenodd"}},null,-1),gt=U("path",{d:"M7.57 6.43v4a.57.57 0 1 1-1.14 0v-4a.57.57 0 1 1 1.14 0zM7 3c-.47 0-.86.38-.86.86s.39.85.86.85.86-.38.86-.86S7.47 3 7 3z",style:{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#fff"}},null,-1),wt=[mt,gt];function _t(o,e){return ut(),ft("svg",pt,[].concat(wt))}var bt={render:_t},xt=function(){return X({name:"IconPrompt",component:bt})()};const Et=({api:o,state:e})=>()=>{e.duration>0&&(e.timer=setTimeout(()=>{!e.closed&&o.close()},e.duration))},Ct=o=>()=>{clearTimeout(o.timer),o.timer=null},Lt=({emit:o,state:e})=>()=>{typeof e.onClick=="function"&&(void 0).onClick(),o("click","")},kt=({state:o,props:e})=>()=>{(!e.beforeClose||typeof e.beforeClose=="function"&&e.beforeClose())&&(typeof e.onClose=="function"&&e.onClose(),o.closed=!0)},Ot=o=>e=>{e&&(o.visible=!1)},Tt=o=>{const e={};return e[o.verticalProperty]=`${o.verticalOffset}px`,e},It=()=>tt.nextZIndex(),Nt=o=>o.position.startsWith("top-")?"top":"bottom",St=({api:o,state:e})=>()=>{e.timer&&o.clearTimer(),o.startTimer(),et(document,"keydown",o.bindKeyDown)},Pt=o=>()=>nt(document,"keydown",o.bindKeyDown),$t=["state","clearTimer","startTimer","close","bindEvent","unBindEvent","click","watchClosed","getOffsetStyle","getPositionSide","getZindex"],jt=(o,{computed:e,onBeforeUnmount:d,onMounted:f,reactive:u,watch:c},{emit:v})=>{const l={},h=u({timer:null,closed:!1,visible:!0,duration:e(()=>o.duration),showClose:!0,verticalOffset:0,position:e(()=>o.position),dangerouslyUseHTMLString:!1,positionStyle:e(()=>l.getOffsetStyle(h)),verticalProperty:e(()=>l.getPositionSide(h)),customClass:e(()=>o.customClass)});return Object.assign(l,{state:h,getZindex:It,getOffsetStyle:Tt,getPositionSide:Nt,close:kt({state:h,props:o}),click:Lt({emit:v,state:h}),clearTimer:Ct(h),bindEvent:St({api:l,state:h}),unBindEvent:Pt(l),startTimer:Et({api:l,state:h}),watchClosed:Ot(h)}),c(()=>h.closed,l.watchClosed,{immediate:!0}),f(l.bindEvent),d(l.unBindEvent),l};function A(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */A=function(){return e};var o,e={},d=Object.prototype,f=d.hasOwnProperty,u=Object.defineProperty||function(r,t,n){r[t]=n.value},c=typeof Symbol=="function"?Symbol:{},v=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function y(r,t,n){return Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),r[t]}try{y({},"")}catch{y=function(n,i,s){return n[i]=s}}function E(r,t,n,i){var s=t&&t.prototype instanceof $?t:$,a=Object.create(s.prototype),p=new D(i||[]);return u(a,"_invoke",{value:J(r,n,p)}),a}function m(r,t,n){try{return{type:"normal",arg:r.call(t,n)}}catch(i){return{type:"throw",arg:i}}}e.wrap=E;var S="suspendedStart",P="suspendedYield",M="executing",O="completed",_={};function $(){}function T(){}function b(){}var j={};y(j,v,function(){return this});var L=Object.getPrototypeOf,G=L&&L(L(H([])));G&&G!==d&&f.call(G,v)&&(j=G);var F=b.prototype=$.prototype=Object.create(j);function Y(r){["next","throw","return"].forEach(function(t){y(r,t,function(n){return this._invoke(t,n)})})}function B(r,t){function n(s,a,p,g){var w=m(r[s],r,a);if(w.type!=="throw"){var I=w.arg,k=I.value;return k&&typeof k=="object"&&f.call(k,"__await")?t.resolve(k.__await).then(function(N){n("next",N,p,g)},function(N){n("throw",N,p,g)}):t.resolve(k).then(function(N){I.value=N,p(I)},function(N){return n("throw",N,p,g)})}g(w.arg)}var i;u(this,"_invoke",{value:function(a,p){function g(){return new t(function(w,I){n(a,p,w,I)})}return i=i?i.then(g,g):g()}})}function J(r,t,n){var i=S;return function(s,a){if(i===M)throw Error("Generator is already running");if(i===O){if(s==="throw")throw a;return{value:o,done:!0}}for(n.method=s,n.arg=a;;){var p=n.delegate;if(p){var g=K(p,n);if(g){if(g===_)continue;return g}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(i===S)throw i=O,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);i=M;var w=m(r,t,n);if(w.type==="normal"){if(i=n.done?O:P,w.arg===_)continue;return{value:w.arg,done:n.done}}w.type==="throw"&&(i=O,n.method="throw",n.arg=w.arg)}}}function K(r,t){var n=t.method,i=r.iterator[n];if(i===o)return t.delegate=null,n==="throw"&&r.iterator.return&&(t.method="return",t.arg=o,K(r,t),t.method==="throw")||n!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var s=m(i,r.iterator,t.arg);if(s.type==="throw")return t.method="throw",t.arg=s.arg,t.delegate=null,_;var a=s.arg;return a?a.done?(t[r.resultName]=a.value,t.next=r.nextLoc,t.method!=="return"&&(t.method="next",t.arg=o),t.delegate=null,_):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function Q(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function V(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function D(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(Q,this),this.reset(!0)}function H(r){if(r||r===""){var t=r[v];if(t)return t.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var n=-1,i=function s(){for(;++n<r.length;)if(f.call(r,n))return s.value=r[n],s.done=!1,s;return s.value=o,s.done=!0,s};return i.next=i}}throw new TypeError(typeof r+" is not iterable")}return T.prototype=b,u(F,"constructor",{value:b,configurable:!0}),u(b,"constructor",{value:T,configurable:!0}),T.displayName=y(b,h,"GeneratorFunction"),e.isGeneratorFunction=function(r){var t=typeof r=="function"&&r.constructor;return!!t&&(t===T||(t.displayName||t.name)==="GeneratorFunction")},e.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,b):(r.__proto__=b,y(r,h,"GeneratorFunction")),r.prototype=Object.create(F),r},e.awrap=function(r){return{__await:r}},Y(B.prototype),y(B.prototype,l,function(){return this}),e.AsyncIterator=B,e.async=function(r,t,n,i,s){s===void 0&&(s=Promise);var a=new B(E(r,t,n,i),s);return e.isGeneratorFunction(t)?a:a.next().then(function(p){return p.done?p.value:a.next()})},Y(F),y(F,h,"Generator"),y(F,v,function(){return this}),y(F,"toString",function(){return"[object Generator]"}),e.keys=function(r){var t=Object(r),n=[];for(var i in t)n.push(i);return n.reverse(),function s(){for(;n.length;){var a=n.pop();if(a in t)return s.value=a,s.done=!1,s}return s.done=!0,s}},e.values=H,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(V),!t)for(var n in this)n.charAt(0)==="t"&&f.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=o)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(I,k){return p.type="throw",p.arg=t,n.next=I,k&&(n.method="next",n.arg=o),!!k}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],p=a.completion;if(a.tryLoc==="root")return i("end");if(a.tryLoc<=this.prev){var g=f.call(a,"catchLoc"),w=f.call(a,"finallyLoc");if(g&&w){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(g){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!w)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&f.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&(t==="break"||t==="continue")&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var p=a?a.completion:{};return p.type=t,p.arg=n,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(p)},complete:function(t,n){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&n&&(this.next=n),_},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),V(i),_}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var s=i.completion;if(s.type==="throw"){var a=s.arg;V(i)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:H(t),resultName:n,nextLoc:i},this.method==="next"&&(this.arg=o),_}},e}function R(o,e,d,f,u,c,v){try{var l=o[c](v),h=l.value}catch(y){d(y);return}l.done?e(h):Promise.resolve(h).then(f,u)}function Gt(o){return function(){var e=this,d=arguments;return new Promise(function(f,u){var c=o.apply(e,d);function v(h){R(c,f,u,v,l,"next",h)}function l(h){R(c,f,u,v,l,"throw",h)}v(void 0)})}}var Ft=at({name:st+"Notify",props:{beforeClose:Function,closeIcon:{type:Object,default:function(){return ct()}},customClass:[String,Object],duration:{type:Number,default:0},message:[String,Function],onClose:Function,position:{type:String,default:"bottom-right"},showClose:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},statusIcon:Object,title:[String,Function],type:String},setup:function(e,d){return lt({props:e,context:d,renderless:jt,api:$t,mono:!0})},render:function(){var e=this.clearTimer,d=this.click,f=this.close,u=this.closeIcon,c=this.message,v=this.showClose,l=this.showIcon,h=this.startTimer,y=this.state,E=this.statusIcon,m=this.title,S=this.type,P={},M=P.closeVNode,O=M===void 0?null:M,_=P.iconVNode,$=_===void 0?null:_,T=P.notifyContent,b=T===void 0?null:T,j=P.notifyTitle,L=j===void 0?null:j;l&&E&&($=C("div",{class:"tiny-notify__icon-zone"},[C("span",{class:"tiny-notify__icon-status"},[C(E,{class:"tiny-svg-size"},null)])])),v&&(O=C("div",{class:"tiny-notify__close-zone"},[C("span",{class:"tiny-notify__icon-close"},[C(u,{class:"tiny-svg-size",onClick:f},null)])])),m&&typeof m=="string"?L=z("div",{class:"tiny-notify__title"},m):typeof m=="function"&&(L=m(z,{vm:this,titleClass:"tiny-notify__title"})),typeof c=="string"?b=z("p",{class:"tiny-notify__content"},c):typeof c=="function"&&(b=c(z,{vm:this,messageClass:"tiny-notify__content"}));var G=C("div",{class:"tiny-notify__message-zone"},[L?C("div",{class:"tiny-notify__title-wrapper"},[L]):null,C("div",{class:"tiny-notify__content-wrapper"},[b])]);return ht(C("div",{class:["tiny-notify","tiny-notify--"+S,l?"":"tiny-notify--no-icon",v?"":"tiny-notify--no-close",y.position,y.customClass],style:y.positionStyle,onMouseenter:e,onMouseleave:h,onClick:d},[[$,G,O]]),[[dt,"state.visible"]])}}),Mt=1,x=[],W={warning:yt(),error:rt(),info:xt(),success:ot()},Bt={info:5e3,success:5e3,warning:1e4,error:1e4},zt=["top-right","bottom-right"],Vt=function(e,d){var f=null;return Gt(A().mark(function u(){var c=arguments,v=this,l;return A().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f&&clearTimeout(f),l=null,y.next=4,new Promise(function(E){f=setTimeout(function(){l=e.apply(v,c),f=null,E()},d)});case 4:return y.abrupt("return",l);case 5:case"end":return y.stop()}},u)}))},q=function(e){~Object.keys(W).indexOf(e.type)||(e.type="info"),e.duration=e.duration?e.duration:Bt[e.type],e.position=~zt.indexOf(e.position)?e.position:"bottom-right",!e.statusIcon&&e.type&&(e.statusIcon=W[e.type]);var d="notify_"+Mt++,f=e.onClose,u=e.position;e.onClose=function(){Z.close(d,f)};var c=it({el:document.createElement("div"),propsData:e,component:Ft});c.id=d,document.body.appendChild(c.$el);var v=e.offset||0;return x.filter(function(l){return l.state.position===u}).forEach(function(l){v+=l.$el.offsetHeight+16}),v+=e.verticalOffset?Number(e.verticalOffset):16,x.push(c),c.dom=c.$el,c.dom.style.zIndex=c.getZindex(),c.state.verticalOffset=v,c.state.visible=!0,v+c.$el.offsetHeight>window.innerHeight&&x[0]&&x[0].close(x[0].id),c},Z=function(e){var d=e.debounceDelay;return d?Vt(function(){return q(e)},d):q(e)};Z.close=function(o,e){for(var d=-1,f=x.length,u,c=0;c<f;c++){var v=x[c];if(v.id===o){d=c,u=v;break}}if(u){typeof e=="function"&&e(u);var l=u.$el.offsetHeight;if(u.$el.parentNode.removeChild(u.$el),x.splice(d,1),!(f<=1)){var h=u.position,y=x.slice(d),E=16;x.filter(function(m){return m.state.position===h}).forEach(function(m){m.state.verticalOffset=E,E+=m.$el.offsetHeight+16}),y.forEach(function(m){if(m.position===h){var S=parseInt(m.dom.style[u.state.verticalProperty],10)-l-16;m.dom.style[u.state.verticalProperty]=S+"px"}})}}};Z.closeAll=function(){var o=x.slice(0);o=o.reverse(),o.forEach(function(e){e.close()})};function Zt(o=!1){const e=vt(o);return{loading:e,setLoading:u=>{e.value=u},toggle:()=>{e.value=!e.value}}}export{Z as N,Zt as u};
